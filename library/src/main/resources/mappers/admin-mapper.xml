<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE mapper PUBLIC '-//mybatis.org//DTD Mapper 3.0//EN' 'http://mybatis.org/dtd/mybatis-3-mapper.dtd' >
<mapper namespace='com.project.library.admin.model.dao.AdminMapper'>

	<select id="selectApplication" resultType="Application">
		select app_no, app_writer_no, app_cate_no, app_title, app_content, app_create_date, app_create_date, app_modify_date, mem_name
		from application
		join member on app_writer_no = mem_no
		order by app_no desc
	</select>
	
	<select id="getListCount" resultType="_int">
		select count(*)
		from application
	</select>
	
	<select id="getAppListCount" resultType="_int">
		select count(*)
		from application
		where app_cate_no = ${i}
	</select>
	
	<select id="selectFilterApplication" resultType="Application">
		select *
		from application
		join member on app_writer_no = mem_no
		where app_cate_no = ${i}
		order by app_no desc
	</select>
	
	<select id="selectAppDetail" resultType="Application">
		select *
		from application
		where app_no = ${appNo}
	</select>
	
	<delete id="deleteApp">
		delete from application
		where app_no = ${appNo}
	</delete>
	
	<select id="getNoticeListCount" resultType="_int">
		select count(*)
		from notice_board
	</select>
	
	<select id="selectNotice" resultType="Notice">
		select *
		from notice_board
		order by notice_no desc
	</select>
	
	<select id="noticeListCount" resultType="_int">
		select count(*)
		from notice_board
		where notice_category = #{cate}
	</select>
	
	<select id="selectNoticeList" resultType="Notice">
		select *
		from notice_board
		where notice_category = #{cate}
		order by notice_no desc
	</select>
	
	<insert id="insertNotice">
		insert into notice_board
		values(notice_no.nextval, ${memNo}, #{category}, #{title}, #{content}, 'Y', 0, sysdate, sysdate)
	</insert>
	
	<select id="noticeDetail" resultType="Notice">
		select *
		from notice_board
		where notice_no = ${noticeNo} and notice_status = 'Y'
	</select>
	
	
	<update id="updateNotice">
		update notice_board
		set notice_title = #{title}, notice_content = #{content}, notice_category = #{category}, notice_modify_date = sysdate
		where notice_no = ${noticeNo} and notice_status = 'Y'
	</update>
	
	<select id="selectEmployee" resultType="Employee">
		select *
		from employee
		join department using (dept_no)
	</select>
	
	<select id="selectDept" resultType="Employee">
		select *
		from employee
		join department using (dept_no)
		where dept_no = ${deptNo}
	</select>
	
	<update id="updateDept">
		update employee
		set emp_position = #{position}, emp_phone = #{phone}, emp_duties = #{duty}
		where dept_no = ${deptNo} and emp_no = ${empNo}
	</update>
	
	<insert id="insertEmp">
		insert into employee
		values(emp_no.nextval, ${deptNo}, #{name}, #{phone}, #{position}, #{duty})
	</insert>
	
	<delete id="deleteEmp">
		delete from employee
		where emp_no = ${empNo}
	</delete>
</mapper>